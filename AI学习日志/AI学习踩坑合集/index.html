<!DOCTYPE html>


<html theme="dark" showBanner="true" hasBanner="true" > 
<link href="/fontawesome/css/fontawesome.css" rel="stylesheet">
<link href="/fontawesome/css/brands.css" rel="stylesheet">
<link href="/fontawesome/css/solid.css" rel="stylesheet">
<script src="/js/color.global.min.js" ></script>
<script src="/js/load-settings.js" ></script>
<head>
  <meta charset="utf-8">
  
  
  

  
  <title>AI学习踩坑合集 | Ryuuuuko&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="preload" href="/css/fonts/Roboto-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
  <link rel="preload" href="/css/fonts/Roboto-Bold.ttf" as="font" type="font/ttf" crossorigin="anonymous">

  <meta name="description" content="基础不牢，地动山摇  这句话真的是至理名言。入门的时候入的不好，疯狂的踩坑以及遇到很多很多的问题。有很多理论知识和实战的知识都是欠缺的。于是就有了这个合集，去记录遇到的大大小小的问题和不断地做知识补充。就算是遇到了解决肯定还会再忘的，那就本地存个档把这些东西都记录下来。由于个人水平不够，本合集势必是又乱又蠢的了，希望各位读者见谅。 在这里要郑重感谢我的入门领路人兼好好好朋友tan 90°同学。">
<meta property="og:type" content="article">
<meta property="og:title" content="AI学习踩坑合集">
<meta property="og:url" content="http://al0v0.github.io/AI%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%97/AI%E5%AD%A6%E4%B9%A0%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/index.html">
<meta property="og:site_name" content="Ryuuuuko&#39;s blog">
<meta property="og:description" content="基础不牢，地动山摇  这句话真的是至理名言。入门的时候入的不好，疯狂的踩坑以及遇到很多很多的问题。有很多理论知识和实战的知识都是欠缺的。于是就有了这个合集，去记录遇到的大大小小的问题和不断地做知识补充。就算是遇到了解决肯定还会再忘的，那就本地存个档把这些东西都记录下来。由于个人水平不够，本合集势必是又乱又蠢的了，希望各位读者见谅。 在这里要郑重感谢我的入门领路人兼好好好朋友tan 90°同学。">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-09-22T07:08:21.000Z">
<meta property="article:modified_time" content="2023-10-27T13:46:26.587Z">
<meta property="article:author" content="Ryuuuuko">
<meta property="article:tag" content="人工智能">
<meta property="article:tag" content="机器学习">
<meta property="article:tag" content="深度学习">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Ryuuuuko's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/logo.jpg">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body>
  
  
    
<div id="banner" class="">
  <img src="/bannerT1.jpg" itemprop="image">
  <div id="banner-dim"></div>
</div>
 
   
  <div id="main-grid" class="shadow   ">
    <div id="nav" class=""  >
      <navbar id="navbar">
  <nav id="title-nav">
    <a href="/">
      <div id="vivia-logo">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <div>Ryuuuuko's blog </div>
    </a>
  </nav>
  <nav id="main-nav">
    
      <a class="main-nav-link" href="/">Home</a>
    
      <a class="main-nav-link" href="/archives">Archives</a>
    
      <a class="main-nav-link" href="/Friends-Link">Friends Link</a>
    
      <a class="main-nav-link" href="/about">About</a>
    
  </nav>
  <nav id="sub-nav">
    <a id="theme-btn" class="nav-icon">
      <span class="light-mode-icon"><svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20"><path d="M438.5-829.913v-48q0-17.452 11.963-29.476 11.964-12.024 29.326-12.024 17.363 0 29.537 12.024t12.174 29.476v48q0 17.452-11.963 29.476-11.964 12.024-29.326 12.024-17.363 0-29.537-12.024T438.5-829.913Zm0 747.826v-48q0-17.452 11.963-29.476 11.964-12.024 29.326-12.024 17.363 0 29.537 12.024t12.174 29.476v48q0 17.452-11.963 29.476-11.964 12.024-29.326 12.024-17.363 0-29.537-12.024T438.5-82.087ZM877.913-438.5h-48q-17.452 0-29.476-11.963-12.024-11.964-12.024-29.326 0-17.363 12.024-29.537t29.476-12.174h48q17.452 0 29.476 11.963 12.024 11.964 12.024 29.326 0 17.363-12.024 29.537T877.913-438.5Zm-747.826 0h-48q-17.452 0-29.476-11.963-12.024-11.964-12.024-29.326 0-17.363 12.024-29.537T82.087-521.5h48q17.452 0 29.476 11.963 12.024 11.964 12.024 29.326 0 17.363-12.024 29.537T130.087-438.5Zm660.174-290.87-34.239 32q-12.913 12.674-29.565 12.174-16.653-.5-29.327-13.174-12.674-12.673-12.554-28.826.12-16.152 12.794-28.826l33-35q12.913-12.674 30.454-12.674t30.163 12.847q12.709 12.846 12.328 30.826-.38 17.98-13.054 30.653ZM262.63-203.978l-32 34q-12.913 12.674-30.454 12.674t-30.163-12.847q-12.709-12.846-12.328-30.826.38-17.98 13.054-30.653l33.239-31q12.913-12.674 29.565-12.174 16.653.5 29.327 13.174 12.674 12.673 12.554 28.826-.12 16.152-12.794 28.826Zm466.74 33.239-32-33.239q-12.674-12.913-12.174-29.565.5-16.653 13.174-29.327 12.673-12.674 28.826-13.054 16.152-.38 28.826 12.294l35 33q12.674 12.913 12.674 30.454t-12.847 30.163q-12.846 12.709-30.826 12.328-17.98-.38-30.653-13.054ZM203.978-697.37l-34-33q-12.674-12.913-13.174-29.945-.5-17.033 12.174-29.707t31.326-13.293q18.653-.62 31.326 13.054l32 34.239q11.674 12.913 11.174 29.565-.5 16.653-13.174 29.327-12.673 12.674-28.826 12.554-16.152-.12-28.826-12.794ZM480-240q-100 0-170-70t-70-170q0-100 70-170t170-70q100 0 170 70t70 170q0 100-70 170t-170 70Zm-.247-82q65.703 0 111.475-46.272Q637-414.544 637-480.247t-45.525-111.228Q545.95-637 480.247-637t-111.475 45.525Q323-545.95 323-480.247t45.525 111.975Q414.05-322 479.753-322ZM481-481Z"/></svg></span>
      <span class="dark-mode-icon"><svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20"><path d="M480.239-116.413q-152.63 0-258.228-105.478Q116.413-327.37 116.413-480q0-130.935 77.739-227.435t206.304-125.043q43.022-9.631 63.87 10.869t3.478 62.805q-8.891 22.043-14.315 44.463-5.424 22.42-5.424 46.689 0 91.694 64.326 155.879 64.325 64.186 156.218 64.186 24.369 0 46.978-4.946 22.609-4.945 44.413-14.076 42.826-17.369 62.967 1.142 20.142 18.511 10.511 61.054Q807.174-280 712.63-198.206q-94.543 81.793-232.391 81.793Zm0-95q79.783 0 143.337-40.217 63.554-40.218 95.793-108.283-15.608 4.044-31.097 5.326-15.49 1.283-31.859.805-123.706-4.066-210.777-90.539-87.071-86.473-91.614-212.092-.24-16.369.923-31.978 1.164-15.609 5.446-30.978-67.826 32.478-108.282 96.152Q211.652-559.543 211.652-480q0 111.929 78.329 190.258 78.329 78.329 190.258 78.329ZM466.13-465.891Z"/></svg></span>
    </a>
    
      <a id="nav-rss-link" class="nav-icon mobile-hide" href="/atom.xml" title="RSS Feed">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20"><path d="M198-120q-25.846 0-44.23-18.384-18.384-18.385-18.384-44.23 0-25.846 18.384-44.23 18.384-18.385 44.23-18.385 25.846 0 44.23 18.385 18.384 18.384 18.384 44.23 0 25.845-18.384 44.23Q223.846-120 198-120Zm538.385 0q-18.846 0-32.923-13.769-14.076-13.769-15.922-33.23-8.692-100.616-51.077-188.654-42.385-88.039-109.885-155.539-67.5-67.501-155.539-109.885Q283-663.462 182.385-672.154q-19.461-1.846-33.23-16.23-13.769-14.385-13.769-33.846t14.076-32.922q14.077-13.461 32.923-12.23 120.076 8.692 226.038 58.768 105.961 50.077 185.73 129.846 79.769 79.769 129.846 185.731 50.077 105.961 58.769 226.038 1.231 18.846-12.538 32.922Q756.461-120 736.385-120Zm-252 0q-18.231 0-32.423-13.461t-18.653-33.538Q418.155-264.23 348.886-333.5q-69.27-69.27-166.501-84.423-20.077-4.462-33.538-18.961-13.461-14.5-13.461-33.346 0-19.076 13.884-33.23 13.884-14.153 33.115-10.922 136.769 15.384 234.384 112.999 97.615 97.615 112.999 234.384 3.231 19.23-10.538 33.115Q505.461-120 484.385-120Z"/></svg>
      </a>
    
    <div id="nav-menu-btn" class="nav-icon">
      <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20"><path d="M177.37-252.282q-17.453 0-29.477-11.964-12.024-11.963-12.024-29.326t12.024-29.537q12.024-12.174 29.477-12.174h605.26q17.453 0 29.477 11.964 12.024 11.963 12.024 29.326t-12.024 29.537q-12.024 12.174-29.477 12.174H177.37Zm0-186.218q-17.453 0-29.477-11.963-12.024-11.964-12.024-29.326 0-17.363 12.024-29.537T177.37-521.5h605.26q17.453 0 29.477 11.963 12.024 11.964 12.024 29.326 0 17.363-12.024 29.537T782.63-438.5H177.37Zm0-186.217q-17.453 0-29.477-11.964-12.024-11.963-12.024-29.326t12.024-29.537q12.024-12.174 29.477-12.174h605.26q17.453 0 29.477 11.964 12.024 11.963 12.024 29.326t-12.024 29.537q-12.024 12.174-29.477 12.174H177.37Z"/></svg>
    </div>
  </nav>
</navbar>
<div id="nav-dropdown" class="hidden">
  <div id="dropdown-link-list">
    
      <a class="nav-dropdown-link" href="/">Home</a>
    
      <a class="nav-dropdown-link" href="/archives">Archives</a>
    
      <a class="nav-dropdown-link" href="/Friends-Link">Friends Link</a>
    
      <a class="nav-dropdown-link" href="/about">About</a>
    
    
      <a class="nav-dropdown-link" href="/atom.xml" title="RSS Feed">RSS</a>
     
    </div>
</div>
<script>
  let dropdownBtn = document.getElementById("nav-menu-btn");
  let dropdownEle = document.getElementById("nav-dropdown");
  dropdownBtn.onclick = function() {
    dropdownEle.classList.toggle("hidden");
  }
</script>
    </div>
    <div id="sidebar-wrapper">
      <sidebar id="sidebar">
  
    <div class="widget-wrap">
  <div class="info-card">
    <div class="avatar">
      
        <image src=/favicon.jpg></image>
      
      <div class="img-dim"></div>
    </div>
    <div class="info">
      <div class="username">Ryuuuuko </div>
      <div class="dot"></div>
      <div class="subtitle">Ab1azE首席音游手，头像是冲田总司的女人 </div>
      <div class="link-list">
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://twitter.com" title="Twitter"><i class="fa-brands fa-twitter"></i></a>
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://store.steampowered.com" title="Steam"><i class="fa-brands fa-steam"></i></a>
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://github.com" title="GitHub"><i class="fa-brands fa-github"></i></a>
         
      </div>  
    </div>
  </div>
</div>

  
  <div class="sticky">
    
      


  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Categories</h3>
      <div class="category-box">
            <a class="category-link" href="/categories/AI%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%97/">
                AI学习日志
                <div class="category-count">5</div>
            </a>
        
            <a class="category-link" href="/categories/%E6%94%B6%E6%AD%8C%E8%A1%A5%E5%BD%95%E8%AE%A1%E5%88%92/">
                收歌补录计划
                <div class="category-count">2</div>
            </a>
        
            <a class="category-link" href="/categories/Blog-Information/">
                Blog Information
                <div class="category-count">2</div>
            </a>
        
            <a class="category-link" href="/categories/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/">
                论文笔记
                <div class="category-count">3</div>
            </a>
        
            <a class="category-link" href="/categories/%E6%9D%82%E8%B0%88/">
                杂谈
                <div class="category-count">3</div>
            </a>
        </div>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Tags</h3>
      <ul class="widget-tag-list" itemprop="keywords"><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/CytusII/" rel="tag">CytusII</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E4%BB%8B%E7%BB%8D/" rel="tag">介绍</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E5%BD%95%E5%B1%8F/" rel="tag">录屏</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E6%89%8B%E5%85%83/" rel="tag">手元</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E6%97%B6%E5%BA%8F%E9%A2%84%E6%B5%8B/" rel="tag">时序预测</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">深度学习</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/" rel="tag">论文笔记</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E9%82%AE%E9%9B%86/" rel="tag">邮集</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Archives</h3>
      
      
        <a class="archive-link" href="/archives/2024/01 ">
          January 2024 
          <div class="archive-count">2 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/12 ">
          December 2023 
          <div class="archive-count">1 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/10 ">
          October 2023 
          <div class="archive-count">4 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/09 ">
          September 2023 
          <div class="archive-count">8 </div>
        </a>
      
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Recent Posts</h3>
      <ul>
        
          <a class="recent-link" href="/%E6%9D%82%E8%B0%88/jottings-24-01-30/" title="jottings-24-01-30" >
            <div class="recent-link-text">
              jottings-24-01-30
            </div>
          </a>
        
          <a class="recent-link" href="/%E6%9D%82%E8%B0%88/jottings-24-01-22/" title="人在这个世界上要遵守的东西有三样:约定、爱和赏味期限" >
            <div class="recent-link-text">
              人在这个世界上要遵守的东西有三样:约定、爱和赏味期限
            </div>
          </a>
        
          <a class="recent-link" href="/AI%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%97/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/" title="机器学习常用算法" >
            <div class="recent-link-text">
              机器学习常用算法
            </div>
          </a>
        
          <a class="recent-link" href="/AI%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%97/%E5%90%8E%E9%97%A8%E6%94%BB%E5%87%BB%E9%98%B2%E5%BE%A1%E6%96%B9%E6%B3%95/" title="后门攻击防御方法" >
            <div class="recent-link-text">
              后门攻击防御方法
            </div>
          </a>
        
          <a class="recent-link" href="/AI%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%97/CV-%E5%9B%BE%E5%83%8F%E5%8F%A0%E5%8A%A0%E5%99%AA%E5%A3%B0/" title="CV|图像叠加噪声" >
            <div class="recent-link-text">
              CV|图像叠加噪声
            </div>
          </a>
        
      </ul>
    </div>
  </div>

    
  </div>
</sidebar>
    </div>
    <div id="content-body">
       

<article id="post-AI学习踩坑合集" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
    
   
  <div class="article-inner">
    <div class="article-main">
      <header class="article-header">
        
<div class="main-title-bar">
  <div class="main-title-dot"></div>
  
    
      <h1 class="p-name article-title" itemprop="headline name">
        AI学习踩坑合集
      </h1>
    
  
</div>

        <div class='meta-info-bar'>
          <div class="meta-info">
  <time class="dt-published" datetime="2023-09-22T07:08:21.000Z" itemprop="datePublished">2023-09-22</time>
</div>
          <div class="need-seperator meta-info">
            <div class="meta-cate-flex">
  
  <a class="meta-cate-link" href="/categories/AI%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%97/">AI学习日志</a>
   
</div>
  
          </div>
          <div class="wordcount need-seperator meta-info">
            1.7k words 
          </div>
        </div>
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">深度学习</a></li></ul>

      </header>
      <div class="e-content article-entry" itemprop="articleBody">
        
          <span id="more"></span>

<p style="color:red;font-size:30px;">基础不牢，地动山摇</p>

<p>这句话真的是至理名言。入门的时候入的不好，疯狂的踩坑以及遇到很多很多的问题。有很多理论知识和实战的知识都是欠缺的。于是就有了这个合集，去记录遇到的大大小小的问题和不断地做知识补充。就算是遇到了解决肯定还会再忘的，那就本地存个档把这些东西都记录下来。由于个人水平不够，本合集势必是又乱又蠢的了，希望各位读者见谅。</p>
<p>在这里要郑重感谢我的入门领路人兼好好好朋友tan 90°同学。每一次都会被tan 90°的奇思妙想和他强大的学习能力、动手能力深深折服，橙色橘猫头像同学是我永远的老师。</p>
<h2 id="损失函数"><a href="#损失函数" class="headerlink" title="损失函数"></a>损失函数</h2><hr>
<p><strong>CrossEntropyLoss</strong>（交叉熵）</p>
<p>分类任务里常用的损失函数。</p>
<p><strong>Negative log likelihood loss</strong>（负对数似然损失）</p>
<p>同样的，也是分类任务里常用的损失函数。</p>
<p>两者都在torch.nn里，支持直接调用，调用的用法是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">loss_fc = torch.nn.CrossEntropyLoss() <span class="comment">#torch.nn.NLLLoss()</span></span><br><span class="line">loss = loss_fc(output,label)</span><br><span class="line"><span class="comment">#其中，output是模型的输出（模型预测得到的所有类的概率张量），label就是标签</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>CrossEntropyLoss和nll_loss的主要区别是：</p>
<p>利用网络的output和真实标签target计算softmax+交叉熵损失的过程为：<br>（1）sm=softmax(output)； 计算softmax<br>（2）logsm=log(sm)； 取对数<br>（3）loss=-logsm.*target 取负后与onehot标签对应相乘完成交叉熵计算</p>
<p>CrossEntropyLoss执行上述三步，而NLLLoss相当于只执行（3）</p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33727302/article/details/110174224">https://blog.csdn.net/qq_33727302/article/details/110174224</a></p>
</blockquote>
<p>因此，在实际训练中，如果做的是分类任务，且使用CrossEntropyLoss作为损失函数的话，神经网络的部分就没必要加入nn.Softmax或者nn.LogSoftmax等之类的，因为在CrossEntropyLoss已经内置了该功能</p>
<p><strong>手撕交叉熵：</strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/SongGu1996/article/details/99056721">交叉熵损失函数（Cross Entropy Loss）_crossentropyloss-CSDN博客</a></p>
<hr>
<h2 id="对抗样本"><a href="#对抗样本" class="headerlink" title="对抗样本"></a>对抗样本</h2><hr>
<p><strong>解决对一个对象多次BP更新时造成的RuntimeError: you can only change requires_grad flags of leaf variables.问题</strong></p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/xjtu_yyl/article/details/120594713">解决对一个对象多次BP更新时造成的RuntimeError: you can only change requires_grad flags of leaf variables.问题_YulongYang1896的博客-CSDN博客</a></p>
<p>在生成对抗样本的情境中，常常需要对一个对象（比如对抗扰动）进行多次的反向传播更新。</p>
<p>报错原因：攻击函数返回值是同一个对象perturbation，该对象在一开始计算时被设置requires_grad = True，在以上函数运行完一遍之后，计算图变成：perturbation -&gt; adv -&gt; pred -&gt; loss -&gt; perturbation. 也就是说，完成一遍更新之后，perturbation不再是叶子节点了，因此报错。</p>
<p>解决办法：每轮更新得到的对抗样本或扰动在输入模型得到输出时，不要把这个对像作为模型输入，而是复制成一个新的张量，并且这个张量脱离计算图。这样在下一次重新进入函数开始新一轮计算时就不会对计算图造成混乱。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> perturbation.detach()</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="卷积层和池化层"><a href="#卷积层和池化层" class="headerlink" title="卷积层和池化层"></a>卷积层和池化层</h2><hr>
<p>做卷积可以直接调用pytorch的内置函数。分两种</p>
<p>1.构建卷积网络 – nn.Conv2d()</p>
<p>torch.nn.Conv2d(<em>in_channels</em>, <em>out_channels</em>, <em>kernel_size</em>, <em>stride=1</em>, <em>padding=0</em>, <em>dilation=1</em>, <em>groups=1</em>, <em>bias=True</em>, <em>padding_mode=’zeros’</em>, <em>device=None</em>, <em>dtype=None</em>)</p>
<p>in_channels:输入通道数</p>
<p>out_channels:卷积核个数</p>
<p>kernel_size:卷积核的shape，如果输入x是int，那么就是（x，x）</p>
<p>stride:卷积核移动的步长</p>
<p>padding:填充，（行数、列数）</p>
<blockquote>
<p>Padding即所谓的图像填充，后面的int型常数代表填充的多少（行数、列数），默认为0。需要注意的是这里的填充包括图像的上下左右，以padding = 1为例，若原始图像大小为32x32，那么padding后的图像大小就变成了34x34，而不是33x33。<br>  Pytorch不同于Tensorflow的地方在于，Tensorflow提供的是padding的模式，比如same、valid，且不同模式对应了不同的输出图像尺寸计算公式。而Pytorch则需要手动输入padding的数量。</p>
</blockquote>
<p>dilation:这个参数决定了是否采用空洞卷积，默认为1（不采用）</p>
<blockquote>
<p>若dilation=2：<a target="_blank" rel="noopener" href="https://github.com/vdumoulin/conv_arithmetic/blob/master/README.md">https://github.com/vdumoulin/conv_arithmetic/blob/master/README.md</a></p>
</blockquote>
<p>bias:是否加偏置</p>
<p>padding_mode:padding模式，默认是0填充</p>
<blockquote>
<p>zero：零填充（在矩阵的高、宽两个维度上用0进行填充，填充时将在一个维度的两边都进行填充）</p>
<p>reflect：镜像填充（以矩阵边缘为对称轴，将矩阵中的元素对称的填充到最外围）</p>
<p>replicate：重复填充（直接用边缘的像素值来填充）</p>
<p>circular：循环填充</p>
</blockquote>
<p>参考链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/sazass/article/details/116790155">https://blog.csdn.net/sazass/article/details/116790155</a></p>
<p>2.调用卷积函数</p>
<hr>
<h2 id="常用链接："><a href="#常用链接：" class="headerlink" title="常用链接："></a>常用链接：</h2><hr>
<p>1.image标签名称对应表： <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41770169/article/details/80482942">ImageNet图像库1000个类别名称（中文注释不断更新）_imagenet类别_有石为玉的博客-CSDN博客</a></p>
<hr>
<h2 id="一些常用的python处理函数"><a href="#一些常用的python处理函数" class="headerlink" title="一些常用的python处理函数"></a>一些常用的python处理函数</h2><p>我有健忘症（</p>
<hr>
<h4 id="pytorch张量拷贝"><a href="#pytorch张量拷贝" class="headerlink" title="pytorch张量拷贝"></a>pytorch张量拷贝</h4><table>
<thead>
<tr>
<th># Operation</th>
<th>New/Shared memory</th>
<th>Still in computation graph</th>
</tr>
</thead>
<tbody><tr>
<td>tensor.clone()</td>
<td>New</td>
<td>Yes</td>
</tr>
<tr>
<td>tensor.detach()</td>
<td>Shared</td>
<td>No</td>
</tr>
</tbody></table>
<p>clone()函数可以返回一个完全相同的tensor,新的tensor开辟新的内存，但是仍然留在计算图中</p>
<p>detach()函数可以返回一个完全相同的tensor,新的tensor开辟与旧的tensor共享内存，新的tensor会脱离计算图，不会牵扯梯度计算。此外，一些原地操作(in-place, such as resize_ / resize_as_ / set_ / transpose_) 在两者任意一个执行都会引发错误。</p>
<hr>
<h4 id="tensor转图片"><a href="#tensor转图片" class="headerlink" title="tensor转图片"></a>tensor转图片</h4><p>因此，在将tensor恢复成图片时，我们常用的是detach()函数。</p>
<p>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">img_tensor = tensor.detach()</span><br><span class="line">out_img = img_tensor.squeeze(<span class="number">0</span>) <span class="comment">#裁掉batch size</span></span><br><span class="line"><span class="comment">#归一化的均值和方差</span></span><br><span class="line">channel_mean = [<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>]</span><br><span class="line">channel_std = [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>]</span><br><span class="line"><span class="comment">#反归一化的均值和方差</span></span><br><span class="line">MEAN = [-mean/std <span class="keyword">for</span> mean, std <span class="keyword">in</span> <span class="built_in">zip</span>(channel_mean, channel_std)]</span><br><span class="line">STD = [<span class="number">1</span>/std <span class="keyword">for</span> std <span class="keyword">in</span> channel_std]</span><br><span class="line"><span class="comment">#tensor转图片</span></span><br><span class="line">denormalizer = transforms.Normalize(mean=MEAN, std=STD)</span><br><span class="line">inv_img = denormalizer(out_img)</span><br><span class="line">inv_img *= <span class="number">255</span></span><br><span class="line">inv_img = inv_img.permute(<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>)  <span class="comment">#记得转换维度</span></span><br><span class="line">inv_img = inv_img.numpy().astype(<span class="string">"uint8"</span>)</span><br><span class="line">plt.imshow(inv_img)</span><br><span class="line">inv_img = Image.fromarray(inv_img)</span><br><span class="line">inv_img.save(<span class="string">"img.jpg"</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="tensor与ndarray互转"><a href="#tensor与ndarray互转" class="headerlink" title="tensor与ndarray互转"></a>tensor与ndarray互转</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ndarry转tensor</span></span><br><span class="line">ten = torch.tensor(a,dtype=torch.<span class="built_in">float</span>)  <span class="comment">#dtype可选</span></span><br><span class="line">ten = torch.from_numpy(a)  </span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>torch.from_numpy()会指向相同的内存地址。修改原array变量ten也会变！！！</p>
<p>torch.tensor()不会指向相同的内存地址，是深度copy。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果一个tensor的device是GPU，先使用如下命令转为CPU</span></span><br><span class="line">tensor.cpu()  </span><br><span class="line"><span class="comment"># 再使用tensor.numpy()进行转化</span></span><br><span class="line">a = tensor.data.numpy()</span><br><span class="line"><span class="comment"># tensor到GPU</span></span><br><span class="line">tensor.GPU()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果是普通的tensor</span></span><br><span class="line">a = tensor.numpy()</span><br></pre></td></tr></table></figure>

<p>注意：<br>GPU上的tensor不能和numpy直接转换。必须先转换为CPU上的tensor</p>
<hr>
<h4 id="latex公式语法"><a href="#latex公式语法" class="headerlink" title="latex公式语法"></a>latex公式语法</h4><p>latex公式写法参考链接：</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/110756681">LaTeX 公式篇 - 知乎 (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/six_gods/article/details/112658088">【精选】【latex技巧】常用公式汇总（精简：））_latex公式_six_gods的博客-CSDN博客</a></p>
<hr>

        
      </div>

         
    </div>
    
     
  </div>
  
    
<nav id="article-nav">
  <a class="article-nav-btn left "
    
      href="/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/autoformer/"
      title="论文笔记|autoformer"
     >
    <i class="fa-solid fa-angle-left"></i>
    <p class="title-text">
      
        论文笔记|autoformer
        
    </p>
  </a>
  <a class="article-nav-btn right "
    
      href="/%E6%94%B6%E6%AD%8C%E8%A1%A5%E5%BD%95%E8%AE%A1%E5%88%92/CytusII-%E6%94%B6%E6%AD%8C%E8%A1%A5%E5%BD%95%E8%AE%A1%E5%88%92-%E9%82%AE%E9%9B%86/"
      title="CytusII|收歌补录计划-邮集"
     >

    <p class="title-text">
      
        CytusII|收歌补录计划-邮集
        
    </p>
    <i class="fa-solid fa-angle-right"></i>
  </a>
</nav>


  
</article>

 
    </div>
    <div id="footer-wrapper">
      <footer id="footer">
  
  <div id="footer-info" class="inner">
    
    &copy; 2024 Ryuuuuko<br>
    Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & Theme <a target="_blank" rel="noopener" href="https://github.com/saicaca/hexo-theme-vivia">Vivia</a>
  </div>
</footer>

    </div>
    <div class="back-to-top-wrapper">
    <button id="back-to-top-btn" class="back-to-top-btn hide" onclick="topFunction()">
        <i class="fa-solid fa-angle-up"></i>
    </button>
</div>

<script>
    function topFunction() {
        window.scroll({ top: 0, behavior: 'smooth' });
    }
    let btn = document.getElementById('back-to-top-btn');
    function scrollFunction() {
        if (document.body.scrollTop > 600 || document.documentElement.scrollTop > 600) {
            btn.classList.remove('hide')
        } else {
            btn.classList.add('hide')
        }
    }
    window.onscroll = function() {
        scrollFunction();
    }
</script>

  </div>
  <script src="/js/light-dark-switch.js"></script>
</body>
</html>
